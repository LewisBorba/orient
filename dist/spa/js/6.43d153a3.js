(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"44a1":function(a,t,e){"use strict";var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-table",{staticClass:"q-mb-lg",attrs:{title:"Consultas confirmadas",grid:a.$q.screen.xs,data:a.data,columns:a.columns,"row-key":"name",loading:a.loading},scopedSlots:a._u([{key:"header",fn:function(t){return[e("q-tr",{attrs:{props:t}},a._l(t.cols,(function(n){return e("q-th",{key:n.name,attrs:{props:t}},[a._v("\n        "+a._s(n.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[e("q-tr",{attrs:{props:t}},a._l(t.cols,(function(n){return e("q-td",{key:n.name,attrs:{props:t}},["link"==n.name?e("q-btn",{attrs:{color:"primary",round:"",dense:"",icon:"content_copy"}}):a._e(),"link"==n.name?e("span",[a._v(" ")]):a._e(),"link"==n.name?e("a",{attrs:{href:n.value}},[a._v(" "+a._s(n.value))]):a._e(),"link"!=n.name?e("span",[a._v("\n          "+a._s(n.value)+"\n        ")]):a._e()],1)})),1)]}},{key:"item",fn:function(t){return[e("q-card",{staticClass:"q-my-xs q-pb-xs full-width"},[e("q-card-section",[e("div",{staticClass:"q-mb-sm"},[e("q-btn",{attrs:{color:"primary",round:"",dense:"",icon:"content_copy"}}),a._v("\n         \n        Link: "),e("br")],1),e("a",{attrs:{href:t.row.link}},[a._v(a._s(t.row.link))])]),e("q-separator"),e("q-list",{attrs:{dense:""}},a._l(t.cols.filter((function(a){return"link"!=a.name})),(function(n){return e("q-item",{key:n.name,attrs:{props:t}},[e("q-item-section",[e("q-item-label",[a._v(a._s(n.name))])],1),e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[a._v(a._s(n.value))])],1)],1)})),1)],1)]}}])})},s=[],o={name:"TableConsultasConfirmadas",props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},loading:{type:Boolean,required:!0}}},r=o,i=e("2877"),l=e("eaac"),c=e("bd08"),m=e("357e"),d=e("db86"),u=e("9c40"),p=e("f09f"),b=e("a370"),f=e("eb85"),h=e("1c1c"),C=e("66e5"),q=e("4074"),g=e("0170"),y=e("eebe"),_=e.n(y),v=Object(i["a"])(r,n,s,!1,null,null,null);t["a"]=v.exports;_()(v,"components",{QTable:l["a"],QTr:c["a"],QTh:m["a"],QTd:d["a"],QBtn:u["a"],QCard:p["a"],QCardSection:b["a"],QSeparator:f["a"],QList:h["a"],QItem:C["a"],QItemSection:q["a"],QItemLabel:g["a"]})},6687:function(a,t,e){"use strict";class n{isEmailValido(a){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(a)&&t.test(a)||"E-mail inválido."}isTamanhoValido(a,t){return a?a.length>=t||"Tamanho inválido.":"Obrigatório"}}t["a"]=new n},"7fce":function(a,t,e){"use strict";e.d(t,"a",(function(){return r}));var n=e("bc3a"),s=e.n(n),o=e("2a19");class r{async criar(a){let t=!1;return await Object(n["post"])("/appointment",a).then((a=>{o["a"].create({type:"positive",progress:!0,timeout:4e3,message:"Solicitação Cadastrada"}),t=!0})).catch((a=>{console.log(a),o["a"].create({type:"negative",message:"Oops! algo deu errado :( tente novamente mais tarde"})})),t}async getUsersConsultas(a){let t=!1;return await Object(n["get"])(`/appointment/requested-appointments/${a}`).then((a=>{t=a.data})).catch((a=>{console.log(a)})),t}async getUsersAcceptedConsultas(a){let t=!1;return await Object(n["get"])(`/appointment/accepted-appointments/${a}`).then((a=>{t=a.data})).catch((a=>{console.log(a)})),t}async getPacientes(a){let t=!1;return await Object(n["get"])(`/appointment/available-appointments/${a}`).then((a=>{t=a.data})).catch((a=>{console.log(a)})),t}async getConsultasMarcadas(a){let t=!1;return await Object(n["get"])(`/appointment/scheduled-appointments/${a}`).then((a=>{t=a.data})).catch((a=>{console.log(a)})),t}async deletarConsulta(a){let t=!1;return await s.a.delete(`/appointment/cancel-appointment/${a}`).then((a=>{o["a"].create({type:"positive",icon:"remove_circle_outline",message:"Consulta Removida"}),t=!0})).catch((a=>{console.log(a),o["a"].create({type:"negative",message:"Oops! algo deu errado"})})),t}async aceitarConsulta(a,t){let e=!1;return await Object(n["put"])(`/appointment/${a}`,t).then((a=>{e=!0})).catch((a=>{console.log(a)})),e}}},d31f:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",[e("q-tabs",{staticClass:"bg-primary text-white shadow-2",attrs:{dense:"",align:"justify",breakpoint:0},model:{value:a.tab,callback:function(t){a.tab=t},expression:"tab"}},[e("q-tab",{attrs:{name:"marcar_consulta",icon:"alarm",label:"Marcar Consulta"}}),e("q-tab",{attrs:{name:"minhas_consultas",icon:"list",label:"Minhas Consultas"}})],1),e("q-tab-panels",{attrs:{animated:"",swipeable:""},model:{value:a.tab,callback:function(t){a.tab=t},expression:"tab"}},[e("q-tab-panel",{attrs:{name:"marcar_consulta"}},[e("div",{staticClass:"width-50-desktop"},[e("p",{staticClass:"text-h6"},[a._v("Informações para marcar uma consulta:")]),e("q-form",{on:{submit:a.onSubmit}},[e("p",{staticClass:"q-mb-sm"},[a._v("\n            Quais os melhores dias e horários para o seu atendimento?\n          ")]),e("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",label:"Dias e horários",type:"textarea",rules:[a.rules.horarios],hint:"Obrigatório"},model:{value:a.form.availableHours,callback:function(t){a.$set(a.form,"availableHours",t)},expression:"form.availableHours"}}),e("q-separator",{staticClass:"q-mb-md"}),e("p",[e("span",{staticClass:"text-bold"},[a._v(" Psicoterapia: ")]),a._v(" Serviço destinado\n            ao tratamento de questões emocionais como ansiedade, depressão, a\n            perda de alguém querido, um desconforto emocional no trabalho ou\n            problemas de relacionamento. Orientação\n          ")]),e("q-separator",{staticClass:"q-mb-md"}),e("p",[e("span",{staticClass:"text-bold"},[a._v(" Orientação Profissional: ")]),a._v(" Processo\n            de aconselhamento para ajudar a resolver dúvidas sobre as áreas de\n            trabalho e fortalecer o seu conhecimento sobre si mesmo, através\n            da identificação de suas habilidades e interesses.\n          ")]),e("q-separator",{staticClass:"q-mb-md"}),e("p",{staticClass:"q-mb-sm"},[a._v("\n            Informe o tipo de Consulta que deseja receber:\n          ")]),e("q-select",{staticClass:"q-mb-md",attrs:{label:"Tipo de atendimento",outlined:"",options:a.options,hint:"Obrigatório"},model:{value:a.form.appointmentType,callback:function(t){a.$set(a.form,"appointmentType",t)},expression:"form.appointmentType"}}),e("q-btn",{staticClass:"full-width q-mb-md q-py-sm",attrs:{color:"primary",unelevated:"",label:"Solicitar aceite",type:"submit"}})],1)],1)]),e("q-tab-panel",{attrs:{name:"minhas_consultas"}},[e("TableConsultasEmEspera",{attrs:{loading:a.loadingConsultasEmEspera,data:a.dataConsultasEmEspera},on:{deletar:function(t){return a.deletar(t)}}}),e("TableConsultasConfirmadas",{attrs:{loading:a.loadingConsultasConfirmadas,data:a.dataConsultasConfirmadas,columns:a.columns}})],1)],1)],1)},s=[],o=e("6687"),r=e("44a1"),i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-table",{staticClass:"q-mb-md",attrs:{title:"Consultas em espera",data:a.data,columns:a.columns,"row-key":"name",grid:a.$q.screen.xs,loading:a.loading},scopedSlots:a._u([{key:"header",fn:function(t){return[e("q-tr",{attrs:{props:t}},a._l(t.cols,(function(n){return e("q-th",{key:n.name,attrs:{props:t}},[a._v("\n        "+a._s(n.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[e("q-tr",{attrs:{props:t}},a._l(t.cols,(function(n){return e("q-td",{key:n.name,attrs:{props:t}},[a._v("\n        "+a._s(n.value)+"\n\n        "),"delete"==n.name?e("q-btn",{attrs:{color:"primary",round:"",icon:"close"},on:{click:function(e){return a.$emit("deletar",t.row.id)}}}):a._e()],1)})),1)]}},{key:"item",fn:function(t){return[e("q-card",{staticClass:"q-my-xs q-pb-xs full-width"},[e("q-card-section",[e("q-btn",{attrs:{color:"primary",icon:"close",label:"excluir"},on:{click:function(e){return a.$emit("deletar",t.row.id)}}})],1),e("q-separator"),e("q-list",{attrs:{dense:""}},a._l(t.cols.filter((function(a){return"delete"!=a.name})),(function(n){return e("q-item",{key:n.name,attrs:{props:t}},[e("q-item-section",[e("q-item-label",[a._v(a._s(n.name))])],1),e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[a._v(a._s(n.value))])],1)],1)})),1)],1)]}}])})},l=[],c={name:"TableConsultasEmEspera",props:{data:{type:Array,required:!0},loading:{type:Boolean,required:!0}},data(){return{columns:[{name:"availableHours",label:"Horários disponíveis",align:"left",field:"availableHours"},{name:"appointmentType",align:"left",label:"Tipo de atendimento",field:"appointmentType"},{name:"delete",field:"delete",label:"Excluir",align:"center",style:"width:10px"}]}}},m=c,d=e("2877"),u=e("eaac"),p=e("bd08"),b=e("357e"),f=e("db86"),h=e("9c40"),C=e("f09f"),q=e("a370"),g=e("eb85"),y=e("1c1c"),_=e("66e5"),v=e("4074"),w=e("0170"),T=e("eebe"),k=e.n(T),Q=Object(d["a"])(m,i,l,!1,null,null,null),E=Q.exports;k()(Q,"components",{QTable:u["a"],QTr:p["a"],QTh:b["a"],QTd:f["a"],QBtn:h["a"],QCard:C["a"],QCardSection:q["a"],QSeparator:g["a"],QList:y["a"],QItem:_["a"],QItemSection:v["a"],QItemLabel:w["a"]});var O=e("7fce"),x={name:"LobbyUser",components:{TableConsultasConfirmadas:r["a"],TableConsultasEmEspera:E},data(){return{tab:"marcar_consulta",form:{idPatient:null},options:["Psicoterapia","Orientação Profissional"],dataConsultasEmEspera:[],loadingConsultasEmEspera:!1,dataConsultasConfirmadas:[],loadingConsultasConfirmadas:!1,columns:[{name:"horario",label:"Horário confirmado",align:"left",field:"horario"},{name:"link",align:"left",label:"Link para o atendimento",field:"link"},{name:"tipo",align:"left",label:"Tipo de atendimento",field:"tipo"}]}},async mounted(){this.$route.params.id&&(this.form.idPatient=this.$route.params.id),await this.getUsersConsultas(),await this.getUsersAcceptedConsultas()},computed:{rules(){return{horarios:a=>o["a"].isTamanhoValido(a,5)}}},methods:{async deletar(a){const t=await(new O["a"]).deletarConsulta(a);t&&await this.getUsersConsultas()},async onSubmit(){"Psicoterapia"==this.form.appointmentType?this.form.appointmentType="PSICOTERAPIA":this.form.appointmentType="ORIENTACAO_PROFISSIONAL",console.log(this.form.appointmentType);const a=await(new O["a"]).criar(this.form);a&&await this.getUsersConsultas(),this.tab="minhas_consultas"},async getUsersConsultas(){this.loadingConsultasEmEspera=!0;const a=await(new O["a"]).getUsersConsultas(this.form.idPatient);console.log(a),this.dataConsultasEmEspera=a.map((a=>({...a,appointmentType:"PSICOTERAPIA"==a.appointmentType?"Psicoterapia":"Orientação Profissional"}))),console.log("***"),console.log(this.dataConsultasEmEspera),console.log("***"),this.loadingConsultasEmEspera=!1},async getUsersAcceptedConsultas(){this.loadingConsultasConfirmadas=!0;const a=await(new O["a"]).getUsersAcceptedConsultas(this.form.idPatient);console.log(a),this.loadingConsultasConfirmadas=!1}}},P=x,S=e("9989"),$=e("429b"),A=e("7460"),I=e("adad"),j=e("823b"),U=e("0378"),L=e("27f9"),H=e("ddd8"),B=Object(d["a"])(P,n,s,!1,null,null,null);t["default"]=B.exports;k()(B,"components",{QPage:S["a"],QTabs:$["a"],QTab:A["a"],QTabPanels:I["a"],QTabPanel:j["a"],QForm:U["a"],QInput:L["a"],QSeparator:g["a"],QSelect:H["a"],QBtn:h["a"]})}}]);